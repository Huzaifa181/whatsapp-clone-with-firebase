{"version":3,"sources":["logo.svg","firebase.js","SideBarChat.js","StateProvider.js","Sidebar.js","Chat.js","axios.js","reducer.js","Login.js","App.js","index.js"],"names":["firebaseApp","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","db","firestore","auth","provider","GoogleAuthProvider","SideBarChat","addNewChat","id","name","useState","messages","setMessages","useEffect","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","onClick","roomName","prompt","add","className","to","Avatar","message","StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","Sidebar","rooms","setRooms","user","unsubscribe","src","photoURL","IconButton","placeholder","type","room","Chat","axios","create","baseURL","roomId","useParams","input","setInput","setRoomName","sentMessage","e","a","preventDefault","displayName","timestamp","FieldValue","serverTimestamp","Date","length","toDate","toUTCString","mssg","style","color","onChange","target","actionTypes","state","action","Login","dispatch","alt","Button","console","log","signInWithPopup","then","result","catch","err","alert","App","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.923800ef.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import firebase from 'firebase'\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBsQ-co6SdfcxWkZAIB24wYWoBFk3z2Luo\",\r\n  authDomain: \"chatapp-ff5a3.firebaseapp.com\",\r\n  databaseURL: \"https://chatapp-ff5a3.firebaseio.com\",\r\n  projectId: \"chatapp-ff5a3\",\r\n  storageBucket: \"chatapp-ff5a3.appspot.com\",\r\n  messagingSenderId: \"427653757536\",\r\n  appId: \"1:427653757536:web:946d9e0a02d61b6c06e105\",\r\n  measurementId: \"G-52HJM487JG\"\r\n};\r\n\r\n  const firebaseApp=firebase.initializeApp(firebaseConfig)\r\n  const db=firebaseApp.firestore();\r\n  const auth=firebaseApp.auth();\r\n  const provider=new firebase.auth.GoogleAuthProvider();\r\n  export {auth,provider}\r\n  export default db;","import React, { useEffect,useState } from 'react'\r\nimport {Avatar} from '@material-ui/core';\r\nimport db from './firebase'\r\nimport {Link} from \"react-router-dom\";\r\nimport './SideBarChat.css'\r\nconst SideBarChat = ({addNewChat,id,name}) => {\r\n    const [messages, setMessages]=useState([])\r\n    useEffect(()=>{\r\n        if(id){\r\n            db.collection('rooms').doc(id)\r\n            .collection('messages').orderBy('timestamp','desc')\r\n            .onSnapshot(snapshot=>{\r\n                setMessages(\r\n                    snapshot.docs.map(doc=>{\r\n                        return(\r\n                            doc.data()\r\n                        )\r\n                    })\r\n                )\r\n            })\r\n        }        \r\n    },[id])\r\n    const createChat=()=>{\r\n        const roomName=prompt(\"Please enter name for chat\")\r\n        if(roomName){\r\n            db.collection('rooms').add({\r\n                name:roomName\r\n            })\r\n        }\r\n    }\r\n    return !addNewChat?(\r\n        <Link to={`/rooms/${id}`}>\r\n        <div className=\"sidebarChat\">\r\n            <Avatar/>\r\n            <div className=\"sidebarChat__info\">\r\n                <h2>{name}</h2>\r\n                <p>{messages[0]?.message}</p>\r\n            </div>\r\n        </div>\r\n        </Link>\r\n\r\n    )\r\n    :(\r\n        <div onClick={createChat} className='sidebarChat'>\r\n            <h2>Add New Chat</h2>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SideBarChat\r\n","import React,{createContext, useReducer, useContext} from 'react';\r\nexport const StateContext=createContext();\r\n\r\nexport const StateProvider=({reducer, initialState,children})=>{\r\n    return(  \r\n    <StateContext.Provider value={useReducer(reducer, initialState)}>\r\n        {children}\r\n    </StateContext.Provider>\r\n    )\r\n}\r\n\r\nexport const useStateValue=()=>useContext(StateContext);","import React ,{useEffect,useState}from 'react'\r\nimport db from './firebase'\r\nimport DonutLargeIcon from '@material-ui/icons/DonutLarge';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined';\r\nimport {Avatar,IconButton} from '@material-ui/core';\r\nimport SideBarChat from './SideBarChat'\r\nimport './Sidebar.css'\r\nimport {useStateValue} from './StateProvider'\r\nconst Sidebar = () => {\r\n    const [rooms,setRooms]=useState([])\r\n    const[{user},dispatch]=useStateValue();\r\n    useEffect(()=>{\r\n        const unsubscribe=db.collection(\"rooms\").onSnapshot((snapshot)=>{\r\n            setRooms(snapshot.docs.map(doc=>{\r\n                return({\r\n                    id:doc.id,\r\n                    data:doc.data()\r\n                })\r\n            }))\r\n        })\r\n        return()=>{\r\n            unsubscribe()\r\n        }\r\n    },[])\r\n    return ( \r\n        <div className = 'sidebar' >\r\n            <div className=\"sidebar__header\">\r\n                <Avatar src={user?.photoURL}/>\r\n                <div className=\"sidebar__headerRight\">\r\n                    <IconButton>\r\n                        <DonutLargeIcon/>\r\n                    </IconButton>\r\n                    <IconButton>\r\n                        <ChatIcon/>\r\n                    </IconButton>\r\n                    <IconButton>\r\n                        <MoreVertIcon/>\r\n                    </IconButton>\r\n                </div>\r\n            </div>\r\n            <div className=\"sidebar__search\">\r\n                <div className='sidebar__searchContainer'>\r\n                    <SearchOutlinedIcon/>\r\n                    <input placeholder=\"Search or Start Now chat\" type=\"text\"/>\r\n                </div>\r\n            </div>\r\n            <div className=\"sidebar__chats\">\r\n                <SideBarChat addNewChat/>\r\n                {rooms.map(room=>{\r\n                    return(\r\n                        <SideBarChat\r\n                    key={room.id}\r\n                    id={room.id}\r\n                    name={room.data.name}\r\n                    />\r\n                    )\r\n                    \r\n                })}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sidebar","import React,{useState,useEffect} from 'react'\r\nimport {Avatar,IconButton} from '@material-ui/core';\r\nimport DonutLargeIcon from '@material-ui/icons/DonutLarge';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport MicIcon from '@material-ui/icons/Mic';\r\nimport {useStateValue} from './StateProvider'\r\nimport {useParams} from \"react-router-dom\";\r\nimport firebase from 'firebase'\r\nimport db from './firebase'\r\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon'\r\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined';\r\nimport './Chat.css'\r\nimport axios from './axios'\r\nconst Chat = () => {\r\n    const[{user},dispatch]=useStateValue();\r\n    const {roomId}=useParams()\r\n    const [input, setInput]=useState(\"\")\r\n    const [roomName, setRoomName]=useState(\"\")\r\n    const [messages, setMessages]=useState([])\r\n    const sentMessage=async (e)=>{\r\n       e.preventDefault();\r\n       db.collection('rooms').doc(roomId)\r\n            .collection('messages').add({\r\n                message:input,\r\n                name:user.displayName,\r\n                timestamp:firebase.firestore.FieldValue.serverTimestamp()\r\n            })\r\n       setInput('')\r\n    }\r\n    useEffect(()=>{\r\n        if(roomId){\r\n            db.collection('rooms').doc(roomId).onSnapshot(snapshot=>{\r\n                setRoomName(\r\n                    snapshot.data().name\r\n                )\r\n            })\r\n            db.collection('rooms').doc(roomId)\r\n            .collection('messages').orderBy('timestamp','asc')\r\n            .onSnapshot(snapshot=>{\r\n                setMessages(\r\n                    snapshot.docs.map(doc=>{\r\n                        return(\r\n                            doc.data()\r\n                        )\r\n                    })\r\n                )\r\n            })\r\n        }\r\n\r\n    },[roomId])\r\n    return (\r\n        <div className='chat'>\r\n           <div className='chat__header'>\r\n            <Avatar/>\r\n            \r\n            <div className='chat__headerInfo'>\r\n                <h3>{roomName}</h3>\r\n                <p>Last Seen At\r\n                    {new Date(\r\n                        messages[messages.length-1]?.timestamp?.toDate()).toUTCString()\r\n                    }\r\n                </p>\r\n            </div>\r\n            <div className='chat__headerRight'>\r\n            <IconButton>\r\n                    <DonutLargeIcon/>\r\n                    </IconButton>\r\n                    <IconButton>\r\n                        <ChatIcon/>\r\n                    </IconButton>\r\n                    <IconButton>\r\n                        <MoreVertIcon/>\r\n                    </IconButton>\r\n                </div>\r\n            </div>\r\n            <div className='chat__body'>\r\n        {messages.map((mssg)=>{\r\n            return(\r\n\r\n                <p className={`chat__message ${mssg.name==user.displayName && \"chat__receiver\"}`}>\r\n                    <span className='chat__name'>{mssg.name}</span>\r\n                    {mssg.message}\r\n                    <span className=\"chat__timestamp\">\r\n                        {new Date(mssg.timestamp?.toDate()).toUTCString()}\r\n                    </span>\r\n                </p>\r\n            )\r\n        })}\r\n               \r\n            </div>\r\n            <div className='chat__footer'>\r\n                <InsertEmoticonIcon style={{color:\"gray\"}}/>\r\n                <form>\r\n                    <input value={input} onChange={e=>setInput(e.target.value)} placeholder=\"Type a message\" type=\"text\"/>\r\n                    <button onClick={(e)=>sentMessage(e)} type=\"submit\">Send a message</button>\r\n                </form>\r\n                <MicIcon style={{color:\"gray\"}}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat\r\n","import axios from 'axios'\r\n\r\nconst instance=axios.create({\r\n    baseURL:\"http://localhost:9000\"\r\n})\r\n\r\nexport default instance;","export const initialState={\r\n    user:null\r\n}\r\nexport const actionTypes={\r\n    SET_USER:'SET_USER'\r\n}\r\n\r\nconst reducer=(state, action)=>{\r\n    switch (action.type){\r\n        case actionTypes.SET_USER:\r\n            return{\r\n                ...state,\r\n                user:action.user\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default reducer","import React from 'react'\r\nimport './Login.css'\r\nimport {auth, provider} from './firebase'\r\nimport {Button} from '@material-ui/core';\r\nimport {actionTypes} from './reducer'\r\nimport {useStateValue} from './StateProvider'\r\nconst Login = () => {\r\n    const[{},dispatch]=useStateValue();\r\n    const signIn=()=>{\r\n        console.log(\"ju\")\r\n        auth.signInWithPopup(provider).then(result=>{\r\n            dispatch({\r\n                type:actionTypes.SET_USER,\r\n                user:result.user\r\n            })\r\n            console.log(result)\r\n        })\r\n        .catch(err=>{\r\n            alert(err.message)\r\n        })\r\n    }\r\n    return (\r\n        <div className='login'>\r\n            <div className='login__container'>\r\n                <img src='https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg' alt='whatsapp logo'/>\r\n                <div className='login__text'>\r\n                    <h1>\r\n                        Signin to Whatsapp\r\n                    </h1>\r\n                </div>\r\n                <Button onClick={signIn}>\r\n                    Signin with Google\r\n                </Button>\r\n            </div>\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default Login\r\n","import React, { useEffect,useState } from \"react\";\nimport {BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport logo from './logo.svg';\n\nimport 'antd/dist/antd.css';\nimport Sidebar from './Sidebar'\nimport Chat from './Chat'\nimport Login from './Login'\nimport './App.css'\nimport {useStateValue} from './StateProvider'\n\nfunction App() {\n  const [{user},dispatch]=useStateValue();\n  console.log(useStateValue)\n  return (\n    <div className='app'>\n      {!user?<Login/>: \n        <div className='app__body'>\n          <Router> \n            <Switch>\n              <Route path='/rooms/:roomId'>\n                <Sidebar/>\n                <Chat/>\n              </Route> \n              <Route path='/'>\n              <Sidebar/>\n              </Route>\n            </Switch>\n          </Router> \n        \n        \n        </div>      \n}\n  </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reducer,{initialState} from './reducer'\nimport {StateProvider} from './StateProvider'\nReactDOM.render( \n    <React.StrictMode >\n        <StateProvider initialState={initialState} reducer={reducer}>\n            <App/>\n        </StateProvider>\n    </React.StrictMode>\n    ,\n    document.getElementById('root')\n);"],"sourceRoot":""}